{"ast":null,"code":"import _regeneratorRuntime from\"/Users/heyuting/404lab/404_project/WebApplicationProject/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/heyuting/404lab/404_project/WebApplicationProject/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/heyuting/404lab/404_project/WebApplicationProject/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useCallback}from'react';import'./homePage.css';import Navbar from'../../components/Navbar/Navbar';import Form from'../../components/Post/Form';import{Link,useNavigate}from\"react-router-dom\";import FormData from'form-data';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditProfile(){var _this=this;var AUTHOR_ID=\"1111111111\";var base_url=\"http://127.0.0.1:8000\";var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),github=_useState4[0],setGithub=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var data=new FormData();var handleName=useCallback(function(event){setError('');setName(event.target.value);},[]);var handleGit=useCallback(function(event){setError('');setGithub(event.target.value);},[]);var handleSubmit=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(name){data.append('username',name);}if(github){data.append('github',github);}axios.post(\"\".concat(base_url,\"/authors/\").concat(AUTHOR_ID,\"/\"),data).then(function(response){console.log(response);navigate('/');}).catch(function(e){setError(e);console.log(e);});_this.props.toggle();case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());return/*#__PURE__*/_jsxs(\"div\",{className:\"homePage\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bar\",children:/*#__PURE__*/_jsx(Navbar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"split profile\",children:[/*#__PURE__*/_jsx(Link,{to:\"./../\",className:\"back\",children:\"x\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"post_information\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Form,{type:\"text\",name:\"userName\",action:handleName,placeholder:\"new name\"}),/*#__PURE__*/_jsx(Form,{type:\"text\",name:\"github\",action:handleGit,placeholder:\"github name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-clearfix\",children:/*#__PURE__*/_jsx(\"button\",{class:\"btn\",type:\"submit\",children:\"Submit\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"flash\",children:error})]})})]})]});}","map":{"version":3,"names":["React","useState","useCallback","Navbar","Form","Link","useNavigate","FormData","axios","EditProfile","AUTHOR_ID","base_url","navigate","name","setName","github","setGithub","error","setError","data","handleName","event","target","value","handleGit","handleSubmit","e","preventDefault","append","post","then","response","console","log","catch","props","toggle"],"sources":["/Users/heyuting/404lab/404_project/WebApplicationProject/src/views/home/editProfile.jsx"],"sourcesContent":["import React, { useState, useCallback } from 'react'\nimport './homePage.css'\nimport Navbar from '../../components/Navbar/Navbar';\nimport Form from '../../components/Post/Form';\nimport { Link, useNavigate } from \"react-router-dom\";\nimport FormData from 'form-data';\nimport axios from 'axios';\n\nexport default function EditProfile() {\n    const AUTHOR_ID = \"1111111111\";\n    const base_url = \"http://127.0.0.1:8000\";\n    const navigate = useNavigate();\n    const [name, setName] = useState('');\n    const [github, setGithub] = useState('');\n    const [error, setError] = useState('');\n    let data = new FormData()\n\n    const handleName = useCallback((event) => {\n        setError('')\n        setName(event.target.value)\n    }, [])\n\n    const handleGit = useCallback((event) => {\n        setError('')\n        setGithub(event.target.value)\n    }, [])\n\n    const handleSubmit = useCallback(async (e) => {\n        e.preventDefault()\n        if (name) {\n            data.append('username', name)\n        }\n        if (github) {\n            data.append('github', github)\n        }\n        axios\n            .post(`${base_url}/authors/${AUTHOR_ID}/`, data)\n            .then((response) => {\n                console.log(response);\n                navigate('/')\n            })\n            .catch((e) => {\n                setError(e)\n                console.log(e);\n            });\n        this.props.toggle();\n    })\n\n    return (\n        <div className='homePage'>\n            <div className='bar'>\n                <Navbar />\n            </div>\n            <div className='split profile'>\n                <Link to={`./../`} className=\"back\">x</Link>\n                <div className='container'>\n                    <form className='post_information' onSubmit={handleSubmit} >\n                        <Form\n                            type=\"text\"\n                            name=\"userName\"\n                            action={handleName}\n                            placeholder=\"new name\"\n                        />\n                        <Form\n                            type=\"text\"\n                            name=\"github\"\n                            action={handleGit}\n                            placeholder=\"github name\"\n                        />\n                        <div className=\"field is-clearfix\">\n                        <button class=\"btn\" type=\"submit\" >\n                            Submit\n                        </button>\n                        </div>\n                        <p className=\"flash\">{error}</p>\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}