{"ast":null,"code":"var _jsxFileName = \"/Users/heyuting/404lab/404_project/WebApplicationProject/src/components/Message/MessageList.jsx\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport './MessageList.css';\nimport { Cookies } from 'react-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst base_url = process.env.REACT_APP_CURRENT_URL;\nfunction MessageList() {\n  _s();\n  const cookies = new Cookies();\n  const [message, setMessage] = useState([]);\n  const navigate = useNavigate();\n  const AUTHOR_ID = cookies.get('id').split(\"/\").pop();\n  const auth = {\n    username: 'admin',\n    password: 'admin'\n  };\n  let name = '';\n  let content = '';\n  useEffect(() => {\n    axios.get(`${base_url}/authors/${AUTHOR_ID}/inbox`, {\n      auth: auth\n    }).then(res => {\n      let temp = [];\n      res.data.message.forEach(item => {\n        if (item.message.type === 'like') {\n          temp.push({\n            \"type\": item.message.type,\n            \"message\": item.message.context\n          });\n        } else if (item.message.type === 'comment') {} else if (item.message.type === 'Post') {\n          content = item.message.object + \" shares a post to you!\";\n          temp.push({\n            \"type\": item.message.type,\n            \"message\": content,\n            \"post\": item.message.id,\n            \"name\": item.message.object\n          });\n        } else if (item.message.type === 'Follow') {\n          name = item.message.actor;\n          content = \" wants to follow you!\";\n          temp.push({\n            \"type\": item.message.type,\n            \"message\": content,\n            \"id\": item.message.actor,\n            \"name\": item.message.actor_username\n          });\n        } else if (item.message.type === 'post') {\n          name = item.message.author.displayName;\n          content = name + \" shares a friend-only post to you!\";\n          temp.push({\n            \"type\": item.message.type,\n            \"message\": content,\n            \"post\": item.message.id,\n            \"name\": item.message.author.displayName\n          });\n        }\n      });\n      setMessage(temp);\n    }).catch(e => console.log(e));\n  }, [message]);\n  const toOtherUser = (name, author) => {\n    if (author === AUTHOR_ID) {\n      alert(\"This is yourself!\");\n    } else {\n      navigate('../otherProfile', {\n        state: {\n          id: author,\n          name: name\n        }\n      });\n    }\n  };\n  const toPost = (id, type, name) => {\n    console.log(name);\n    navigate('../sharePost', {\n      state: {\n        id: id,\n        type: type,\n        name: name\n      }\n    });\n  };\n  const handleAccept = (id, name) => {\n    axios.put(`${base_url}/authors/${AUTHOR_ID}/followers/${id.split(\"/\").pop()}`).then(response => {\n      console.log(response);\n      alert(name + \" follows you now!\");\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\\n\",\n    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"MessageList\",\n      children: message.map((val, key) => {\n        if (val.type === \"Follow\") {\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"SingleMessage\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"messagePart\",\n                children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                  className: \"userName\",\n                  onClick: () => {\n                    toOtherUser(val.name, val.id);\n                  },\n                  children: [\"@\", val.name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 82,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"message\",\n                  children: val.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 83,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"acceptButton\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"accept\",\n                  onClick: () => {\n                    handleAccept(val.id, val.name);\n                  },\n                  children: \"Accept\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 29\n            }, this)\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this);\n        } else if (val.type === \"Post\" || val.type === \"post\") {\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"SingleMessage\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"messagePart\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  className: \"userName\",\n                  onClick: () => {\n                    toPost(val.post, val.type, val.name);\n                  },\n                  children: [\"@\", val.message]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }, this)\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"SingleMessage\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"messagePart\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"message\",\n                  children: val.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 29\n            }, this)\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 25\n          }, this);\n        }\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(MessageList, \"IklHjQg8CdxNkQEshUM6ReY7rcA=\", false, function () {\n  return [useNavigate];\n});\n_c = MessageList;\nexport default MessageList;\nvar _c;\n$RefreshReg$(_c, \"MessageList\");","map":{"version":3,"names":["axios","React","useState","useEffect","useNavigate","Cookies","base_url","process","env","REACT_APP_CURRENT_URL","MessageList","cookies","message","setMessage","navigate","AUTHOR_ID","get","split","pop","auth","username","password","name","content","then","res","temp","data","forEach","item","type","push","context","object","id","actor","actor_username","author","displayName","catch","e","console","log","toOtherUser","alert","state","toPost","handleAccept","put","response","map","val","key","post"],"sources":["/Users/heyuting/404lab/404_project/WebApplicationProject/src/components/Message/MessageList.jsx"],"sourcesContent":["import axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport './MessageList.css'\nimport { Cookies } from 'react-cookie';\n\nconst base_url = process.env.REACT_APP_CURRENT_URL;\n\nfunction MessageList() {\n    const cookies = new Cookies();\n    const [message, setMessage] = useState([]);\n    const navigate = useNavigate();\n    const AUTHOR_ID = cookies.get('id').split(\"/\").pop();\n    const auth = { username: 'admin', password: 'admin' };\n    let name = '';\n    let content = '';\n    useEffect(() => {\n        axios\n            .get(`${base_url}/authors/${AUTHOR_ID}/inbox`, { auth: auth })\n            .then((res) => {\n                let temp = []\n                res.data.message.forEach((item) => {\n                    if (item.message.type === 'like') {\n                        temp.push({ \"type\": item.message.type, \"message\": item.message.context })\n                    } else if (item.message.type === 'comment') {\n\n                    } else if (item.message.type === 'Post') {\n                        content = item.message.object + \" shares a post to you!\"\n                        temp.push({ \"type\": item.message.type, \"message\": content, \"post\": item.message.id, \"name\": item.message.object })\n                    } else if (item.message.type === 'Follow') {\n                        name = item.message.actor\n                        content = \" wants to follow you!\"\n                        temp.push({ \"type\": item.message.type, \"message\": content, \"id\": item.message.actor, \"name\": item.message.actor_username })\n                    } else if (item.message.type === 'post') {\n                        name = item.message.author.displayName\n                        content = name + \" shares a friend-only post to you!\"\n                        temp.push({ \"type\": item.message.type, \"message\": content, \"post\": item.message.id, \"name\": item.message.author.displayName })\n                    }\n                })\n                setMessage(temp)\n            })\n            .catch((e) => console.log(e));\n    }, [message])\n\n    const toOtherUser = (name, author) => {\n        if (author === AUTHOR_ID) {\n            alert(\"This is yourself!\")\n        }\n        else {\n            navigate('../otherProfile', { state: { id: author, name: name } });\n        }\n    }\n\n    const toPost = (id, type, name) => {\n        console.log(name)\n        navigate('../sharePost', { state: { id: id, type: type, name: name } });\n    }\n\n\n    const handleAccept = (id, name) => {\n        axios\n            .put(`${base_url}/authors/${AUTHOR_ID}/followers/${id.split(\"/\").pop()}`)\n            .then((response) => {\n                console.log(response);\n                alert(name + \" follows you now!\")\n            })\n            .catch((e) => {\n                console.log(e);\n            });\n    }\n\n    return (\n    <div className=\"container\n\">\n        <ul className=\"MessageList\">\n            {message.map((val, key) => {\n                if (val.type === \"Follow\") {\n                    return (\n                        <li key={key}>\n                            <div className=\"SingleMessage\">\n                                <div className=\"messagePart\">\n                                    <a className=\"userName\" onClick={() => { toOtherUser(val.name, val.id) }}>@{val.name}</a>\n                                    <p className=\"message\">{val.message}</p>\n                                </div>\n                                <div className=\"acceptButton\">\n                                    <button className=\"accept\" onClick={() => { handleAccept(val.id, val.name) }}>Accept</button>\n                                </div>\n                            </div>\n                        </li>\n                    );\n                }\n                else if (val.type === \"Post\" || val.type === \"post\") {\n                    return (\n                        <li key={key}>\n                            <div className=\"SingleMessage\">\n                                <div className=\"messagePart\">\n                                    <a className=\"userName\" onClick={() => { toPost(val.post, val.type, val.name) }}>@{val.message}</a>\n                                </div>\n                            </div>\n                        </li>\n                    );\n                }\n                else {\n                    return (\n                        <li key={key}>\n                            <div className=\"SingleMessage\">\n                                <div className=\"messagePart\">\n                                    <p className=\"message\">{val.message}</p>\n                                </div>\n                            </div>\n                        </li>\n                    );\n                }\n\n            })}</ul>\n    </div>\n    )\n}\n\nexport default MessageList;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAO,mBAAmB;AAC1B,SAASC,OAAO,QAAQ,cAAc;AAAC;AAEvC,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB;AAElD,SAASC,WAAW,GAAG;EAAA;EACnB,MAAMC,OAAO,GAAG,IAAIN,OAAO,EAAE;EAC7B,MAAM,CAACO,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAMY,QAAQ,GAAGV,WAAW,EAAE;EAC9B,MAAMW,SAAS,GAAGJ,OAAO,CAACK,GAAG,CAAC,IAAI,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,EAAE;EACpD,MAAMC,IAAI,GAAG;IAAEC,QAAQ,EAAE,OAAO;IAAEC,QAAQ,EAAE;EAAQ,CAAC;EACrD,IAAIC,IAAI,GAAG,EAAE;EACb,IAAIC,OAAO,GAAG,EAAE;EAChBpB,SAAS,CAAC,MAAM;IACZH,KAAK,CACAgB,GAAG,CAAE,GAAEV,QAAS,YAAWS,SAAU,QAAO,EAAE;MAAEI,IAAI,EAAEA;IAAK,CAAC,CAAC,CAC7DK,IAAI,CAAEC,GAAG,IAAK;MACX,IAAIC,IAAI,GAAG,EAAE;MACbD,GAAG,CAACE,IAAI,CAACf,OAAO,CAACgB,OAAO,CAAEC,IAAI,IAAK;QAC/B,IAAIA,IAAI,CAACjB,OAAO,CAACkB,IAAI,KAAK,MAAM,EAAE;UAC9BJ,IAAI,CAACK,IAAI,CAAC;YAAE,MAAM,EAAEF,IAAI,CAACjB,OAAO,CAACkB,IAAI;YAAE,SAAS,EAAED,IAAI,CAACjB,OAAO,CAACoB;UAAQ,CAAC,CAAC;QAC7E,CAAC,MAAM,IAAIH,IAAI,CAACjB,OAAO,CAACkB,IAAI,KAAK,SAAS,EAAE,CAE5C,CAAC,MAAM,IAAID,IAAI,CAACjB,OAAO,CAACkB,IAAI,KAAK,MAAM,EAAE;UACrCP,OAAO,GAAGM,IAAI,CAACjB,OAAO,CAACqB,MAAM,GAAG,wBAAwB;UACxDP,IAAI,CAACK,IAAI,CAAC;YAAE,MAAM,EAAEF,IAAI,CAACjB,OAAO,CAACkB,IAAI;YAAE,SAAS,EAAEP,OAAO;YAAE,MAAM,EAAEM,IAAI,CAACjB,OAAO,CAACsB,EAAE;YAAE,MAAM,EAAEL,IAAI,CAACjB,OAAO,CAACqB;UAAO,CAAC,CAAC;QACtH,CAAC,MAAM,IAAIJ,IAAI,CAACjB,OAAO,CAACkB,IAAI,KAAK,QAAQ,EAAE;UACvCR,IAAI,GAAGO,IAAI,CAACjB,OAAO,CAACuB,KAAK;UACzBZ,OAAO,GAAG,uBAAuB;UACjCG,IAAI,CAACK,IAAI,CAAC;YAAE,MAAM,EAAEF,IAAI,CAACjB,OAAO,CAACkB,IAAI;YAAE,SAAS,EAAEP,OAAO;YAAE,IAAI,EAAEM,IAAI,CAACjB,OAAO,CAACuB,KAAK;YAAE,MAAM,EAAEN,IAAI,CAACjB,OAAO,CAACwB;UAAe,CAAC,CAAC;QAC/H,CAAC,MAAM,IAAIP,IAAI,CAACjB,OAAO,CAACkB,IAAI,KAAK,MAAM,EAAE;UACrCR,IAAI,GAAGO,IAAI,CAACjB,OAAO,CAACyB,MAAM,CAACC,WAAW;UACtCf,OAAO,GAAGD,IAAI,GAAG,oCAAoC;UACrDI,IAAI,CAACK,IAAI,CAAC;YAAE,MAAM,EAAEF,IAAI,CAACjB,OAAO,CAACkB,IAAI;YAAE,SAAS,EAAEP,OAAO;YAAE,MAAM,EAAEM,IAAI,CAACjB,OAAO,CAACsB,EAAE;YAAE,MAAM,EAAEL,IAAI,CAACjB,OAAO,CAACyB,MAAM,CAACC;UAAY,CAAC,CAAC;QAClI;MACJ,CAAC,CAAC;MACFzB,UAAU,CAACa,IAAI,CAAC;IACpB,CAAC,CAAC,CACDa,KAAK,CAAEC,CAAC,IAAKC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC,CAAC;EACrC,CAAC,EAAE,CAAC5B,OAAO,CAAC,CAAC;EAEb,MAAM+B,WAAW,GAAG,CAACrB,IAAI,EAAEe,MAAM,KAAK;IAClC,IAAIA,MAAM,KAAKtB,SAAS,EAAE;MACtB6B,KAAK,CAAC,mBAAmB,CAAC;IAC9B,CAAC,MACI;MACD9B,QAAQ,CAAC,iBAAiB,EAAE;QAAE+B,KAAK,EAAE;UAAEX,EAAE,EAAEG,MAAM;UAAEf,IAAI,EAAEA;QAAK;MAAE,CAAC,CAAC;IACtE;EACJ,CAAC;EAED,MAAMwB,MAAM,GAAG,CAACZ,EAAE,EAAEJ,IAAI,EAAER,IAAI,KAAK;IAC/BmB,OAAO,CAACC,GAAG,CAACpB,IAAI,CAAC;IACjBR,QAAQ,CAAC,cAAc,EAAE;MAAE+B,KAAK,EAAE;QAAEX,EAAE,EAAEA,EAAE;QAAEJ,IAAI,EAAEA,IAAI;QAAER,IAAI,EAAEA;MAAK;IAAE,CAAC,CAAC;EAC3E,CAAC;EAGD,MAAMyB,YAAY,GAAG,CAACb,EAAE,EAAEZ,IAAI,KAAK;IAC/BtB,KAAK,CACAgD,GAAG,CAAE,GAAE1C,QAAS,YAAWS,SAAU,cAAamB,EAAE,CAACjB,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,EAAG,EAAC,CAAC,CACxEM,IAAI,CAAEyB,QAAQ,IAAK;MAChBR,OAAO,CAACC,GAAG,CAACO,QAAQ,CAAC;MACrBL,KAAK,CAACtB,IAAI,GAAG,mBAAmB,CAAC;IACrC,CAAC,CAAC,CACDiB,KAAK,CAAEC,CAAC,IAAK;MACVC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;IAClB,CAAC,CAAC;EACV,CAAC;EAED,oBACA;IAAK,SAAS,EAAC,aAClB;IAAA,uBACO;MAAI,SAAS,EAAC,aAAa;MAAA,UACtB5B,OAAO,CAACsC,GAAG,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAK;QACvB,IAAID,GAAG,CAACrB,IAAI,KAAK,QAAQ,EAAE;UACvB,oBACI;YAAA,uBACI;cAAK,SAAS,EAAC,eAAe;cAAA,wBAC1B;gBAAK,SAAS,EAAC,aAAa;gBAAA,wBACxB;kBAAG,SAAS,EAAC,UAAU;kBAAC,OAAO,EAAE,MAAM;oBAAEa,WAAW,CAACQ,GAAG,CAAC7B,IAAI,EAAE6B,GAAG,CAACjB,EAAE,CAAC;kBAAC,CAAE;kBAAA,gBAAGiB,GAAG,CAAC7B,IAAI;gBAAA;kBAAA;kBAAA;kBAAA;gBAAA,QAAK,eACzF;kBAAG,SAAS,EAAC,SAAS;kBAAA,UAAE6B,GAAG,CAACvC;gBAAO;kBAAA;kBAAA;kBAAA;gBAAA,QAAK;cAAA;gBAAA;gBAAA;gBAAA;cAAA,QACtC,eACN;gBAAK,SAAS,EAAC,cAAc;gBAAA,uBACzB;kBAAQ,SAAS,EAAC,QAAQ;kBAAC,OAAO,EAAE,MAAM;oBAAEmC,YAAY,CAACI,GAAG,CAACjB,EAAE,EAAEiB,GAAG,CAAC7B,IAAI,CAAC;kBAAC,CAAE;kBAAA;gBAAA;kBAAA;kBAAA;kBAAA;gBAAA;cAAgB;gBAAA;gBAAA;gBAAA;cAAA,QAC3F;YAAA;cAAA;cAAA;cAAA;YAAA;UACJ,GATD8B,GAAG;YAAA;YAAA;YAAA;UAAA,QAUP;QAEb,CAAC,MACI,IAAID,GAAG,CAACrB,IAAI,KAAK,MAAM,IAAIqB,GAAG,CAACrB,IAAI,KAAK,MAAM,EAAE;UACjD,oBACI;YAAA,uBACI;cAAK,SAAS,EAAC,eAAe;cAAA,uBAC1B;gBAAK,SAAS,EAAC,aAAa;gBAAA,uBACxB;kBAAG,SAAS,EAAC,UAAU;kBAAC,OAAO,EAAE,MAAM;oBAAEgB,MAAM,CAACK,GAAG,CAACE,IAAI,EAAEF,GAAG,CAACrB,IAAI,EAAEqB,GAAG,CAAC7B,IAAI,CAAC;kBAAC,CAAE;kBAAA,gBAAG6B,GAAG,CAACvC,OAAO;gBAAA;kBAAA;kBAAA;kBAAA;gBAAA;cAAK;gBAAA;gBAAA;gBAAA;cAAA;YACjG;cAAA;cAAA;cAAA;YAAA;UACJ,GALDwC,GAAG;YAAA;YAAA;YAAA;UAAA,QAMP;QAEb,CAAC,MACI;UACD,oBACI;YAAA,uBACI;cAAK,SAAS,EAAC,eAAe;cAAA,uBAC1B;gBAAK,SAAS,EAAC,aAAa;gBAAA,uBACxB;kBAAG,SAAS,EAAC,SAAS;kBAAA,UAAED,GAAG,CAACvC;gBAAO;kBAAA;kBAAA;kBAAA;gBAAA;cAAK;gBAAA;gBAAA;gBAAA;cAAA;YACtC;cAAA;cAAA;cAAA;YAAA;UACJ,GALDwC,GAAG;YAAA;YAAA;YAAA;UAAA,QAMP;QAEb;MAEJ,CAAC;IAAC;MAAA;MAAA;MAAA;IAAA;EAAM;IAAA;IAAA;IAAA;EAAA,QACV;AAEV;AAAC,GA7GQ1C,WAAW;EAAA,QAGCN,WAAW;AAAA;AAAA,KAHvBM,WAAW;AA+GpB,eAAeA,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}