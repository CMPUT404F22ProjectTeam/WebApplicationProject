{"ast":null,"code":"module.exports = addHook;\nfunction addHook(state, kind, name, hook) {\n  var orig = hook;\n  if (!state.registry[name]) {\n    state.registry[name] = [];\n  }\n  if (kind === \"before\") {\n    hook = function (method, options) {\n      return Promise.resolve().then(orig.bind(null, options)).then(method.bind(null, options));\n    };\n  }\n  if (kind === \"after\") {\n    hook = function (method, options) {\n      var result;\n      return Promise.resolve().then(method.bind(null, options)).then(function (result_) {\n        result = result_;\n        return orig(result, options);\n      }).then(function () {\n        return result;\n      });\n    };\n  }\n  if (kind === \"error\") {\n    hook = function (method, options) {\n      return Promise.resolve().then(method.bind(null, options)).catch(function (error) {\n        return orig(error, options);\n      });\n    };\n  }\n  state.registry[name].push({\n    hook: hook,\n    orig: orig\n  });\n}","map":{"version":3,"names":["module","exports","addHook","state","kind","name","hook","orig","registry","method","options","Promise","resolve","then","bind","result","result_","catch","error","push"],"sources":["/Users/heyuting/404lab/404_project/WebApplicationProject/node_modules/before-after-hook/lib/add.js"],"sourcesContent":["module.exports = addHook;\n\nfunction addHook(state, kind, name, hook) {\n  var orig = hook;\n  if (!state.registry[name]) {\n    state.registry[name] = [];\n  }\n\n  if (kind === \"before\") {\n    hook = function (method, options) {\n      return Promise.resolve()\n        .then(orig.bind(null, options))\n        .then(method.bind(null, options));\n    };\n  }\n\n  if (kind === \"after\") {\n    hook = function (method, options) {\n      var result;\n      return Promise.resolve()\n        .then(method.bind(null, options))\n        .then(function (result_) {\n          result = result_;\n          return orig(result, options);\n        })\n        .then(function () {\n          return result;\n        });\n    };\n  }\n\n  if (kind === \"error\") {\n    hook = function (method, options) {\n      return Promise.resolve()\n        .then(method.bind(null, options))\n        .catch(function (error) {\n          return orig(error, options);\n        });\n    };\n  }\n\n  state.registry[name].push({\n    hook: hook,\n    orig: orig,\n  });\n}\n"],"mappings":"AAAAA,MAAM,CAACC,OAAO,GAAGC,OAAO;AAExB,SAASA,OAAO,CAACC,KAAK,EAAEC,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAE;EACxC,IAAIC,IAAI,GAAGD,IAAI;EACf,IAAI,CAACH,KAAK,CAACK,QAAQ,CAACH,IAAI,CAAC,EAAE;IACzBF,KAAK,CAACK,QAAQ,CAACH,IAAI,CAAC,GAAG,EAAE;EAC3B;EAEA,IAAID,IAAI,KAAK,QAAQ,EAAE;IACrBE,IAAI,GAAG,UAAUG,MAAM,EAAEC,OAAO,EAAE;MAChC,OAAOC,OAAO,CAACC,OAAO,EAAE,CACrBC,IAAI,CAACN,IAAI,CAACO,IAAI,CAAC,IAAI,EAAEJ,OAAO,CAAC,CAAC,CAC9BG,IAAI,CAACJ,MAAM,CAACK,IAAI,CAAC,IAAI,EAAEJ,OAAO,CAAC,CAAC;IACrC,CAAC;EACH;EAEA,IAAIN,IAAI,KAAK,OAAO,EAAE;IACpBE,IAAI,GAAG,UAAUG,MAAM,EAAEC,OAAO,EAAE;MAChC,IAAIK,MAAM;MACV,OAAOJ,OAAO,CAACC,OAAO,EAAE,CACrBC,IAAI,CAACJ,MAAM,CAACK,IAAI,CAAC,IAAI,EAAEJ,OAAO,CAAC,CAAC,CAChCG,IAAI,CAAC,UAAUG,OAAO,EAAE;QACvBD,MAAM,GAAGC,OAAO;QAChB,OAAOT,IAAI,CAACQ,MAAM,EAAEL,OAAO,CAAC;MAC9B,CAAC,CAAC,CACDG,IAAI,CAAC,YAAY;QAChB,OAAOE,MAAM;MACf,CAAC,CAAC;IACN,CAAC;EACH;EAEA,IAAIX,IAAI,KAAK,OAAO,EAAE;IACpBE,IAAI,GAAG,UAAUG,MAAM,EAAEC,OAAO,EAAE;MAChC,OAAOC,OAAO,CAACC,OAAO,EAAE,CACrBC,IAAI,CAACJ,MAAM,CAACK,IAAI,CAAC,IAAI,EAAEJ,OAAO,CAAC,CAAC,CAChCO,KAAK,CAAC,UAAUC,KAAK,EAAE;QACtB,OAAOX,IAAI,CAACW,KAAK,EAAER,OAAO,CAAC;MAC7B,CAAC,CAAC;IACN,CAAC;EACH;EAEAP,KAAK,CAACK,QAAQ,CAACH,IAAI,CAAC,CAACc,IAAI,CAAC;IACxBb,IAAI,EAAEA,IAAI;IACVC,IAAI,EAAEA;EACR,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"script","externalDependencies":[]}